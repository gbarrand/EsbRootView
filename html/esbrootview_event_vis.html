<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&lt;h2&gt;event_model, event_next, event_vis : THE commands to know&lt;/h2&gt;</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><h2>event_model, event_next, event_vis : THE commands to know</h2>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>For the display, THE commands to know are event_model, event_next and event_vis:</p>
<pre class="fragment">    event_model
    event_next  # have an event, if not done.
    event_vis &lt;event_model_class&gt; [options]
</pre><p> The event_model command lists the event model classes (MCTrack, WCDetectorPoint, FgdDetectorPoint, FgdHit for 2.0.0) along their fields known by the little interpreter of the -cut option of event_vis. </p><pre class="fragment">EsbRootView_insh$ event_model
MCTrack :
E             m             p             py            t             y             
index         mother_id     pdg           pz            x             z             
is_secondary  name          px            rapidity
      
WCDetectorPoint :
Eloss   length  p       pdg     px      py      pz      time    x       y       z       
index

FgdDetectorPoint :
Eloss   length  p       pdg     px      py      pz      time    x       y       z       
index

FgdHit :
absorbed          dz                photoE            time_stamp_error  
added             index             photoEx           x                 
detector_id       mppcx             photoEy           y                 
dx                mppcy             photoEz           z                 
dy                mppcz             time_stamp        
</pre><p>For example, you can type (or have in your event.insh script): </p><pre class="fragment">    event_vis MCTrack -color=red
    event_vis MCTrack -cut=(pdg==50000050) -color=red
    event_vis MCTrack -cut=(pdg!=50000050)&amp;&amp;(mother_id!=-1)&amp;&amp;(is_secondary==false) -color=cyan -modeling=arrow

    event_vis WCDetectorPoint -cut=pdg==50000050 -color=red
    event_vis WCDetectorPoint -cut=pdg!=50000050 -color=blue -point_size=4

    event_vis FgdDetectorPoint -cut=pdg==22 -pickable=true -color=skyblue
    event_vis FgdDetectorPoint -cut=pdg!=22 -pickable=true -color=skyblue -point_size=4

    event_vis FgdHit -modeling=cube -color=skyblue    # FgdHits represented as cubes in solid.
    event_vis FgdHit -point_size=2
</pre><p>The -cut logic applies also for the event_count, event_stats, event_print commands: </p><pre class="fragment">    event_print &lt;event_model_class&gt; [options] [fields]

    event_print MCTrack -cut=(pdg==50000050)
    event_print MCTrack -cut=(pdg==50000050) x y z p

    event_count MCTrack -cut=(pdg==50000050)

    event_stats MCTrack -cut=(pdg==50000050) p t
</pre><p>As explained in "help event_stats", event_stats prints the sum/min/max/mean/rms for the fields of the selected objects: </p><pre class="fragment">EsbRootView_insh$ event_stats MCTrack x y z p t     
MCTrack (49071) sum/min/max/mean/rms with cut "" : 
          x         y           z           p           t
    -143933  -24637.4 8.48516e+06    0.310859 7.10046e+06
   -11.0951  -3.47492         150 1.77014e-09           0
 0.00249994   1.95191     191.255         0.2     409.789
   -2.93316 -0.502076     172.916 6.33488e-06     144.698
    3.47884   1.03714      14.448 0.000947268     195.431
</pre><h1><a class="anchor" id="esbrootview_event_vis_style"></a>
style</h1>
<p>Each event model class has a default representation which is "point" for MCTrack, WCDetectorPoint, FgdDetectorPoint, FgdHit. You can change the color and point size with the options "-color" and "-point_size" as in: </p><pre class="fragment">    event_vis MCTrack -color=cyan -point_size=6
</pre><p> The default values for color and point_size are the ones found in the EsbRootView.style XML file deposited in the res directory. The event_vis command will look in this style file for a style item with the name of the event model class and then, if found, for a color or point_size XML element in it. For example for MCTrack the XML style is: </p><pre class="fragment">    &lt;style name="MCTrack"&gt;
      &lt;color&gt;red&lt;/color&gt;
      &lt;point_size&gt;1&lt;/point_size&gt;
    &lt;/style&gt;
</pre><p> But the graphics attributes passed as options in the event_vis command have priority over the .style file. Note that you can create your own EsbRootView.style file in your doc directory with different default values. It will override the one in res/EsbRootView.style. Then the priority order for style is: </p><pre class="fragment">    res/EsbRootView.style
    doc/EsbRootView.style
    event_vis options  # highest priority
</pre><p> With the style_load_file command, you can also load a style file of your own deposited where you want and with the name you want. For example to load a my.style file put in your home directory: </p><pre class="fragment">    home_dir=`sys_home_dir`
    file_sep=`sys_file_sep`  # to cope also with the Windows/DOS file path syntax.
    style_load_file ${home_dir}${file_sep}my.style
</pre><h1><a class="anchor" id="esbrootview_event_vis_coloring"></a>
coloring</h1>
<p>A color can be given in various ways. It can be given by a common color name in the default colormap (for exa "blue"), by giving the name of a color in a known colormap, by giving an hexa encoding or by giving the three or four r,g,b,a (in [0,1]) of the color.</p>
<p>The command style_print_colormaps prints the known colormaps with their colors.</p>
<p>For example to change the background color in scene mode: </p><pre class="fragment">    scene_set_clear_color lightgrey
    scene_set_clear_color ROOT/kMagenta+3
    scene_set_clear_color '#FFFF00'
    scene_set_clear_color 0.2 0.1 0.2
</pre><p> or to draw the FgdHit as cube with the "ROOT/kMagenta+3" color: </p><pre class="fragment">    event_vis FgdHit -modeling=cube -color='ROOT/kMagenta+3' 
</pre><h1><a class="anchor" id="esbrootview_event_vis_modeling"></a>
modeling</h1>
<p>An event model class can have multiple represenations or modelings. For example the MCTrack has also an "arrow" representation. You can trigger it with the "-modeling" option as in : </p><pre class="fragment">    event_vis MCTrack -modeling=arrow
</pre><p> In this case, for each MCTrack, and arrow is added in the dynamic scene graph starting at the fields (x,y,z) and pointing in the impulse direction. The default parameters for an arrow are found in the EsbRootView.style. It is: </p><pre class="fragment">    &lt;style name="MCTrack_arrow"&gt;   &lt;!-- if MCTrack modeling is "arrow". --&gt;
      &lt;length&gt;10&lt;/length&gt;
      &lt;radius&gt;0.05&lt;/radius&gt;
      &lt;text_scale&gt;4&lt;/text_scale&gt;
      &lt;text_pos&gt;0.3&lt;/text_pos&gt;
      &lt;base_tube&gt;false&lt;/base_tube&gt;  &lt;!-- if true, the base of the arrow is a cylinder,
                                         and a cone if not. --&gt;
    &lt;/style&gt;
</pre><div class="image">
<img src="neard_MCTrack_arrow.png" alt=""/>
</div>
<p>The FgdHit event model class has also the "cube" modeling: </p><pre class="fragment">    event_vis FgdHit -modeling=cube -color=skyblue
</pre> <div class="image">
<img src="FgdHit_cube.png" alt=""/>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->

</body>
</html>
